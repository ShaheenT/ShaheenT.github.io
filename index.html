<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>The Funky Corner Shop</title>
  <!-- PapaParse for CSV parsing -->
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Font Awesome for social icons -->
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    integrity="sha512-pVnK7T6RO5daM+48H4NjHsmE6GHT5PyQa9b6ZKf0bS1fAlXpOd94d5f+EX7qz2H1iWpILP51wAPmE9Xsps/Jkg=="
    crossorigin="anonymous"
    referrerpolicy="no-referrer"
  />
  <!-- Custom styles -->
  <link rel="stylesheet" href="style.css" />
</head>
<body class="bg-gradient-to-r from-yellow-50 via-pink-50 to-pink-100 font-comic overflow-x-hidden">

  <!-- Animated Intro -->
  <div id="intro" class="fixed inset-0 bg-pink-500 flex flex-col justify-center items-center text-white text-4xl font-bold tracking-wide z-50 animate-fadeOut delay-3000">
    <div class="animate-bounce mb-4">🔥 The Main Road Deli Shop 🔥</div>
    <div class="text-xl font-normal">Friday Bowls & Burgers, Delicious Food!</div>
  </div>

  <header class="bg-pink-600 text-white p-6 shadow-md sticky top-0 z-40">
    <div class="container mx-auto flex justify-between items-center">
      <h1 class="text-3xl font-extrabold font-comic tracking-wider select-none">🍜 The Main Road Deli Shop 🍔</h1>
      <nav class="space-x-6 text-lg">
        <a href="#menu" class="hover:text-yellow-300 transition">Menu</a>
        <a href="#order" class="hover:text-yellow-300 transition">Order</a>
        <a href="#contact" class="hover:text-yellow-300 transition">Contact</a>
      </nav>
    </div>
  </header>

  <main class="container mx-auto px-4 mt-10 fade-in">
    <!-- Intro Text -->
    <section class="text-center mb-12 max-w-xl mx-auto">
      <h2 class="text-4xl font-bold mb-4 text-pink-700">Friday Specials</h2>
      <p class="text-lg text-pink-900">Your go-to place for flavour-packed ramen bowls, stacked burgers, and combos to keep you fueled.</p>
    </section>

    <!-- Static Menu Cards -->
    <section id="menu" class="grid md:grid-cols-3 gap-8 max-w-5xl mx-auto">
      <article class="menu-card bg-white rounded-xl shadow-lg p-6 transform hover:scale-105 transition-transform duration-300 cursor-pointer">
        <img
          src="./images/ramen-bowl.jpg"
          alt="Spicy Ramen Bowl"
          class="rounded-lg mb-4 object-cover h-48 w-full"
          loading="lazy"
        />
        <h3 class="item-name text-2xl font-semibold text-pink-700 mb-2">🍜 Spicy Ramen Bowl</h3>
        <p class="text-gray-700 mb-4">Rich miso broth, fire-roasted chili oil, soft egg, noodles that bite back.</p>
        <div class="item-price font-bold text-yellow-500 text-xl">45</div>
      </article>

      <article class="menu-card bg-white rounded-xl shadow-lg p-6 transform hover:scale-105 transition-transform duration-300 cursor-pointer">
        <img
          src="images/funky-burger.jpg"
          alt="Ultimate Funk Burger"
          class="rounded-lg mb-4 object-cover h-48 w-full"
          loading="lazy"
        />
        <h3 class="item-name text-2xl font-semibold text-pink-700 mb-2">🍔 Ultimate Funk Burger</h3>
        <p class="text-gray-700 mb-4">Double smash patties, melted cheddar, zesty funk sauce, brioche bun.</p>
        <div class="item-price font-bold text-yellow-500 text-xl">60</div>
      </article>

      <article class="menu-card bg-white rounded-xl shadow-lg p-6 transform hover:scale-105 transition-transform duration-300 cursor-pointer">
        <img
          src="images/combo-meal.jpg"
          alt="Funky Meal Combo"
          class="rounded-lg mb-4 object-cover h-48 w-full"
          loading="lazy"
        />
        <h3 class="item-name text-2xl font-semibold text-pink-700 mb-2">🥤 Funky Meal Combo</h3>
        <p class="text-gray-700 mb-4">Burger + chips + cool drink — because you're worth it.</p>
        <div class="item-price font-bold text-yellow-500 text-xl">75</div>
      </article>
    </section>

    <!-- Dynamic Specials Section -->
    <section id="dynamic-specials" class="grid md:grid-cols-3 gap-8 max-w-5xl mx-auto mt-12">
      <!-- Dynamic content will be injected here -->
    </section>

    <!-- WhatsApp Order CTA -->
    <section id="order" class="mt-16 text-center">
      <h2 class="text-3xl font-bold mb-4 text-pink-700">Ready to Order?</h2>
      <a
        href="https://wa.me/27926841966?text=Hi%20Funky%20Corner%20Shop!%20I%27d%20like%20to%20place%20an%20order%20for%20your%20Friday%20specials."
        target="_blank"
        class="inline-flex items-center bg-green-500 text-white text-xl font-semibold px-8 py-4 rounded-full shadow-lg hover:bg-green-600 transition"
        aria-label="Order on WhatsApp"
      >
        <i class="fab fa-whatsapp mr-3 text-3xl"></i> Order via WhatsApp
      </a>
    </section>

    <!-- Contact & Social -->
    <section id="contact" class="mt-20 text-center text-gray-800">
      <h2 class="text-3xl font-bold mb-4 text-pink-700">Stay Connected</h2>
      <p class="mb-4">📍 Visit us every Friday for great food & vibes!</p>
      <div class="flex justify-center space-x-6 text-3xl text-pink-600">
        <a href="https://instagram.com/yourshop" target="_blank" aria-label="Instagram" class="hover:text-yellow-400 transition">
          <i class="fab fa-instagram"></i>
        </a>
        <a href="https://facebook.com/yourshop" target="_blank" aria-label="Facebook" class="hover:text-yellow-400 transition">
          <i class="fab fa-facebook-square"></i>
        </a>
      </div>
    </section>
  </main>

  <footer class="bg-pink-600 text-white text-center p-6 mt-20 select-none">
    <p>© 2025 TapToBuy · Built with ❤️ by ENTRPRNRIX</p>
  </footer>

  <!-- Modal for order quantity -->
  <div id="order-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
    <div class="bg-white rounded-lg p-6 max-w-sm w-full relative">
      <button id="modal-close" class="absolute top-3 right-3 text-gray-600 hover:text-gray-900 text-2xl font-bold">&times;</button>
      <h2 id="modal-item-name" class="text-xl font-semibold mb-4 text-pink-700"></h2>
      <label for="quantity" class="block mb-2 font-medium">Quantity:</label>
      <input
        id="quantity"
        type="number"
        min="1"
        value="1"
        class="border border-gray-300 rounded px-3 py-2 mb-4 w-full"
      />
      <button
        id="confirm-order"
        class="bg-pink-600 text-white px-6 py-3 rounded font-semibold w-full hover:bg-pink-700 transition"
      >
        Confirm Order
      </button>
    </div>
  </div>

  <script>
    // Fade out intro screen after 3 seconds
    window.addEventListener('DOMContentLoaded', () => {
      setTimeout(() => {
        const intro = document.getElementById('intro');
        if (intro) intro.style.display = 'none';
      }, 3000);
    });
  </script>

  <script>
    // Modal Elements
    const modal = document.getElementById('order-modal');
    const modalItemName = document.getElementById('modal-item-name');
    const quantityInput = document.getElementById('quantity');
    const confirmBtn = document.getElementById('confirm-order');
    const modalCloseBtn = document.getElementById('modal-close');

    // Open modal with item name and optional price
    function openOrderModal(itemName, itemPrice = '') {
      modalItemName.textContent = itemName + (itemPrice ? ` - R${itemPrice}` : '');
      quantityInput.value = 1;
      modal.classList.remove('hidden');
      quantityInput.focus();
    }

    // Close modal function
    function closeModal() {
      modal.classList.add('hidden');
    }

    modalCloseBtn.addEventListener('click', closeModal);
    // Close modal when clicking outside modal content
    modal.addEventListener('click', (e) => {
      if (e.target === modal) closeModal();
    });

    // Confirm button sends WhatsApp message with order
    confirmBtn.addEventListener('click', () => {
      const itemNameWithPrice = modalItemName.textContent;
      const quantity = quantityInput.value;

      if (!quantity || quantity < 1) {
        alert('Please enter a valid quantity (1 or more).');
        return;
      }

      const phoneNumber = '27826841966'; // Shop's WhatsApp number (country code + number)
      const message = `Hi Funky Corner Shop! I'd like to order ${quantity} x ${itemNameWithPrice}. Please confirm.`;

      const encodedMessage = encodeURIComponent(message);
      const whatsappUrl = `https://wa.me/${phoneNumber}?text=${encodedMessage}`;

      window.open(whatsappUrl, '_blank');
      closeModal();
    });

    document.addEventListener('DOMContentLoaded', () => {
      // Fetch and render dynamic specials
      const csvUrl = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vR8T872UlHWrqBSAMr6vECFpjBeutEqrr_MWtlYqzun35hHTLP2qu4pVlg5gDKF2G2NhkSv8VgtX9I_/pub?gid=670823753&single=true&output=csv';

      fetch(csvUrl)
        .then(response => response.text())
        .then(csvText => {
          const results = Papa.parse(csvText, { header: true });
          const specials = results.data;

          const container = document.getElementById('dynamic-specials');
          container.innerHTML = ''; // Clear existing content

          specials.forEach(item => {
            // Loop through your 3 deal columns, create cards only if there is data
            [
              "Deal 1 – What’s your first special today?",
              "Deal 2 – Any other combo or promotion?",
              "Deal 3 – Another deal you’d like to show?"
            ].forEach(dealKey => {
              const dealValue = item[dealKey];
              if (dealValue && dealValue.trim() !== '') {
                const card = document.createElement('article');
                card.className = 'dynamic-card bg-white rounded-xl shadow-lg p-6 transform hover:scale-105 transition-transform duration-300 cursor-pointer';

                // We show the dealValue as title and shop/location below
                const shopName = item['Shop name or location ']?.trim() || 'our shop';

                card.innerHTML = `
                  <h3 class="item-name text-2xl font-semibold text-pink-700 mb-2">${dealValue}</h3>
                  <p class="text-gray-700 mb-4">Special from ${shopName}</p>
                `;

                container.appendChild(card);

                // Add click to open modal for dynamic cards (no price here)
                card.addEventListener('click', () => {
                  openOrderModal(dealValue);
                });
              }
            });
          });
        })
        .catch(error => console.error('Error fetching or parsing CSV:', error));

      // Add click handlers to static menu cards
      document.querySelectorAll('.menu-card').forEach(card => {
        card.addEventListener('click', () => {
          const itemName = card.querySelector('.item-name')?.textContent.trim() || 'Item';
          const itemPrice = card.querySelector('.item-price')?.textContent.trim() || '';
          openOrderModal(itemName, itemPrice);
        });
      });
    });
  </script>

</body>
</html>
